<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>news</title>
    <!-- jQuery-->
    <script src="js/jquery.min.js"></script>
    <script src="js/angular-route.js"></script>
    <script src="js/angular.js"></script>


    <!-- Custom Theme files -->
    <!--theme-style-->
    <link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="css/style_cc.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/style_foxer.css" rel="stylesheet" type="text/css" media="all" />
    <link rel="stylesheet" href="css/buttons.css"/>
    <link href="http://cdn.bootcss.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

    <!--//theme-style-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="Kappe Responsive web template, Bootstrap Web Templates, Flat Web Templates, Andriod Compatible web template,
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyErricsson, Motorola web design" />
    <script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
    <!--fonts-->
    <!--<link href='http://fonts.useso.com/css?family=Roboto:400,300,100,500,700,900' rel='stylesheet' type='text/css'>-->
    <!--//fonts-->
</head>
<body>
<div class="header" ng-app="myApp" ng-controller="siteCtrl">
    <div class="header-left">
        <div class="logo">
            <a ng-click="check_out()">登出</a>
        </div>
        <div class="top-nav">
            <ul >
                <li><b class="white"></b></li>

                <li ><a href="index_data2.html" >大数据展示</a ></li>
                <li><a href="news.html" class="black" > 新闻资讯</a ></li>
                <li><a href="ranking.html" class="black1"> 龙虎榜</a ></li>
                <li><a href="fundamentals.html" class="black1"> 基本面数据</a ></li>
                <li><a href="work.html" class="black2" > 个人主页</a ></li>
                <li>

                </li>

                <div class="your-top">
                    <form method="get" id="search_form" onkeypress="form_query()" action="/detail.html">
                        <div class="cf">
                            <label class="search-bar">
                                <input id="keyword" placeholder="请输入股票代码" name="code" type="text" value="" class="input-search" >
                                <a id="search" class="btn-search">
                                    <i class="icon-search"></i>
                                </a>
                                <a href="javascript:;" class="btn-more"></a>
                            </label>
                        </div>
                    </form>

                    <div class="clear"> </div>
                </div>

            </ul>
        </div>
    </div>
    <!---->


    <div class="content" ng-app="myApp" ng-controller="siteCtrl">
        <div class="work" >
            <p class="heat-map-title" >&nbsp;&nbsp;&nbsp;基本面数据</p>
            <br />

            <style>
                .l-center{
                    text-align: center;
                    margin-left: auto;
                    margin-right: auto;
                    padding: 1% 1%;
                }
            </style>
            <div id="select_k1" class="showcase-examples l-center">
                <input type="submit" value="盈利能力" class="button button-pill button-primary" style="background-color: #1ab5b3;" ng-click="Select_profit(1)" id="profit">
                <input type="submit" value="营运能力" class="button button-pill button-primary" style="background-color: #1ab5b3;" ng-click="Select_operation(1)" id="operation">
                <input type="submit" value="成长能力" class="button button-pill button-primary" style="background-color: #1ab5b3;" ng-click="Select_growth(1)" id="growth">
                <input type="submit" value="偿债能力" class="button button-pill button-primary" style="background-color: #1ab5b3;" ng-click="Select_debtpaying(1)" id="debtpaying">
                <input type="submit" value="现金流量" class="button button-pill button-primary" style="background-color: #1ab5b3;" ng-click="Select_cashflow(1)" id="cashflow">
                <!--<button class="button button-pill button-primary">Go</button>-->
            </div>


            <table width="100%" border="0" cellspacing="0" cellpadding="0" >
                <tr>
                    <td scope="col" style="vertical-align:middle; text-align:center;" ng-repeat="t in miaotitle">{{t}}</td>
                </tr>
                <tr ng-repeat="miao in data">
                    <td style="vertical-align:middle; text-align:center;" ng-repeat="x in miao">{{x}}</td>
                </tr>

                <style>
                    .guding{text-align:center;}
                    #miao{display:inline-block;}
                </style>

            </table>

            <!--分页 start-->
            <div class="guding" >
                <ul class="pagination" id="miao">
                    <li><a href="#" ng-click="jump_up()">&laquo;</a></li>
                    <li class="pagination" ng-repeat="x in panel"><a ng-click="inquire(type, x)">{{x}}</a></li>
                    <li><a href="#" ng-click="jump_down()">&raquo;</a></li>
                </ul>
            </div>
            <!-- 分页 end -->

        <!-- end main -->
            <div class="clear"> </div>
        </div>
        <div class="clear"> </div>
    </div>
</div>
</body>
</html>
<script>
    var app = angular.module('myApp', []);
    app.controller('siteCtrl', function($scope, $http) {
        $http.get("http://localhost:8080/special/profit")
            .then(function (response) {
                if (response.data === 400)
                    window.location.href =  "login.html";
                document.getElementById("growth").style.backgroundColor = "#778288";
                document.getElementById("operation").style.backgroundColor = "#778288";
                document.getElementById("cashflow").style.backgroundColor = "#778288";
                document.getElementById("debtpaying").style.backgroundColor = "#778288";
                document.getElementById("profit").style.backgroundColor = "#1ab5b3";
                var title = new Array("股票代码","股票名称","净资产收益率(%)","净利率(%)","毛利率(%)","净利润(万元)","每股收益","营业收入(百万元)","每股主营业务收入(元)");
                $scope.miaotitle = title;
                $scope.data = response.data.data;
                $scope.current_page = response.data.page;
                $scope.total = response.data.total;
                $scope.type = 1;
                $scope.init_page();
                $scope.current_panel = 1;
            });

        $scope.check_out = function () {
            window.location.href =  "login.html";
        };
        $scope.jump_up = function () {
            if($scope.current_panel == 1)
                return;
            else{
                $scope.current_panel -= 1;
                var pages = new Array();
                for(var i = ($scope.current_panel - 1) * 10 + 1 ; i<= $scope.current_panel * 10; i++)
                    pages.push(i);
                $scope.panel = pages;
            }
        };
        $scope.jump_down= function () {
            if($scope.current_panel * 10 >= $scope.total)
                return;
            else{
                $scope.current_panel += 1;
                var pages = new Array();
                for(var i = ($scope.current_panel - 1) * 10 + 1 ; i<= $scope.current_panel * 10; i++)
                    pages.push(i);
                $scope.panel = pages;
            }
        };
        $scope.init_page = function () {
            var pages = new Array();
            for(var i = 1; i<= 10; i++)
                pages.push(i);
            $scope.panel = pages;
            $scope.current_panel = 1;
        };

        $scope.inquire = function (type, page) {
            if (type === 1)
                $scope.Select_profit(page);
            else if(type === 2)
                $scope.Select_growth(page);
            else if(type === 3)
                $scope.Select_operation(page);
            else if(type === 4)
                $scope.Select_cashflow(page);
            else if(type === 5)
                $scope.Select_debtpaying(page);
        };
        $scope.Select_profit = function (page) {
            $http.get("http://localhost:8080/special/profit?page=" + page)
                .then(function (response) {
                    document.getElementById("growth").style.backgroundColor = "#778288";
                    document.getElementById("operation").style.backgroundColor = "#778288";
                    document.getElementById("cashflow").style.backgroundColor = "#778288";
                    document.getElementById("debtpaying").style.backgroundColor = "#778288";
                    document.getElementById("profit").style.backgroundColor = "#1ab5b3";
                    if (response.data === 400)
                        window.location.href =  "login.html";
                    var title = new Array("股票代码","股票名称","净资产收益率(%)","净利率(%)","毛利率(%)","净利润(万元)","每股收益","营业收入(百万元)","每股主营业务收入(元)");
                    $scope.miaotitle = title;
                    $scope.data = response.data.data;
                    if ($scope.type != 1)
                        $scope.init_page();
                    $scope.type = 1;
                    $scope.current_page = response.data.page;
                    $scope.total = response.data.total;
                });
        };
        $scope.Select_growth = function (page) {
            $http.get("http://localhost:8080/special/growth?page=" + page)
                .then(function (response) {
                    document.getElementById("growth").style.backgroundColor = "#1ab5b3";
                    document.getElementById("operation").style.backgroundColor = "#778288";
                    document.getElementById("cashflow").style.backgroundColor = "#778288";
                    document.getElementById("debtpaying").style.backgroundColor = "#778288";
                    document.getElementById("profit").style.backgroundColor = "#778288";
                    if (response.data === 400)
                        window.location.href =  "login.html";
                    var title = new Array("股票代码","股票名称","主营业务收入增长率(%)","净利润增长率(%)","净资产增长率","总资产增长率","每股收益增长率","股东权益增长率");
                    $scope.miaotitle = title;
                    $scope.data = response.data.data;
                    if ($scope.type != 2)
                        $scope.init_page();
                    $scope.type = 2;
                    $scope.current_page = response.data.page;
                    $scope.total = response.data.total;
                });
        }
        $scope.Select_operation = function (page) {
            $http.get("http://localhost:8080/special/operation?page=" + page)
                .then(function (response) {
                    document.getElementById("growth").style.backgroundColor = "#778288";
                    document.getElementById("operation").style.backgroundColor = "#1ab5b3";
                    document.getElementById("cashflow").style.backgroundColor = "#778288";
                    document.getElementById("debtpaying").style.backgroundColor = "#778288";
                    document.getElementById("profit").style.backgroundColor = "#778288";
                    if (response.data === 400)
                        window.location.href =  "login.html";

                    var title = new Array("股票代码","股票名称","应收账款周转率(次)","应收账款周转天数(天)","存货周转率(次)","存货周转天数(天)","流动资产周转率(次)","流动资产周转天数(天)");
                    $scope.miaotitle = title;
                    $scope.data = response.data.data;
                    if ($scope.type != 3)
                        $scope.init_page();
                    $scope.type = 3;
                    $scope.current_page = response.data.page;
                    $scope.total = response.data.total;
                });
        }
        $scope.Select_cashflow = function (page) {
            $http.get("http://localhost:8080/special/cashflow?page=" + page)
                .then(function (response) {
                    document.getElementById("growth").style.backgroundColor = "#778288";
                    document.getElementById("operation").style.backgroundColor = "#778288";
                    document.getElementById("cashflow").style.backgroundColor = "#1ab5b3";
                    document.getElementById("debtpaying").style.backgroundColor = "#778288";
                    document.getElementById("profit").style.backgroundColor = "#778288";
                    if (response.data === 400)
                        window.location.href =  "login.html";
                    var title = new Array("股票代码","股票名称","经营现金净流量对销售收入比率","资产的经营现金流量回报率","经营现金净流量与净利润的比率","经营现金净流量对负债比率","现金流量比率");
                    $scope.miaotitle = title;
                    $scope.data = response.data.data;
                    if ($scope.type != 4)
                        $scope.init_page();
                    $scope.type = 4;
                    $scope.current_page = response.data.page;
                    $scope.total = response.data.total;
                });
        }
        $scope.Select_debtpaying = function (page) {
            $http.get("http://localhost:8080/special/debt?page=" + page)
                .then(function (response) {
                    document.getElementById("growth").style.backgroundColor = "#778288";
                    document.getElementById("operation").style.backgroundColor = "#778288";
                    document.getElementById("cashflow").style.backgroundColor = "#778288";
                    document.getElementById("debtpaying").style.backgroundColor = "#1ab5b3";
                    document.getElementById("profit").style.backgroundColor = "#778288";
                    if (response.data === 400)
                        window.location.href =  "login.html";

                    var title = new Array("股票代码","股票名称","流动比率","速动比率","现金比率","利息支付倍数","股东权益比率","股东权益增长率");
                    $scope.miaotitle = title;
                    $scope.data = response.data.data;
                    if ($scope.type != 5)
                        $scope.init_page();
                    $scope.type = 5;
                    $scope.current_page = response.data.page;
                    $scope.total = response.data.total;
                });
        }
    });
</script>